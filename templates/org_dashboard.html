<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BloodConnect | Organization Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #d32f2f;
            --primary-dark: #b71c1c;
            --primary-light: #ffebee;
            --secondary: #4caf50;
            --accent: #ff9800;
            --dark: #2b2d42;
            --light: #f8f9fa;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --success: #4caf50;
            --warning: #ffc107;
            --danger: #f44336;
            --border-radius: 12px;
            --box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f9fafc;
            color: var(--dark);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--light-gray);
        }

        .welcome-section h1 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 2.2rem;
            margin-bottom: 5px;
            color: var(--dark);
        }

        .welcome-section p {
            color: var(--gray);
            font-size: 1.1rem;
        }

        .logout-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(211, 47, 47, 0.25);
        }

        .logout-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), #9e1616);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(211, 47, 47, 0.35);
        }
                .search-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(211, 47, 47, 0.25);
        }
        /* Tabs Navigation */
        .tabs-container {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 30px;
            overflow: hidden;
        }

        .tabs-nav {
            display: flex;
            background: white;
            border-bottom: 2px solid var(--light-gray);
        }

        .tab-btn {
            flex: 1;
            padding: 18px 20px;
            text-align: center;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 1.1rem;
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .tab-btn:hover {
            color: var(--primary);
        }

        .tab-btn.active {
            color: var(--primary);
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
            border-radius: 3px 3px 0 0;
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Events Section */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .section-header h2 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.8rem;
            color: var(--dark);
        }

        .new-event-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(211, 47, 47, 0.25);
        }

        .new-event-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), #9e1616);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(211, 47, 47, 0.35);
        }

        .no-events {
            background: white;
            padding: 40px;
            text-align: center;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            font-size: 1.1rem;
            color: var(--gray);
        }

        .no-events i {
            font-size: 3rem;
            color: var(--primary-light);
            margin-bottom: 20px;
        }

        /* Events Grid */
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
            gap: 25px;
        }

        .event-card {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            border: 1px solid var(--light-gray);
            position: relative;
        }

        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
        }

        .card-header {
            background: var(--primary-light);
            padding: 18px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--light-gray);
        }

        .event-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .event-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark);
        }

        .event-location {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            color: var(--gray);
        }

        .event-date {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            color: var(--gray);
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .edit-btn {
            background: var(--light-gray);
            color: var(--gray);
        }

        .edit-btn:hover {
            background: var(--warning);
            color: #333;
        }

        .close-btn {
            background: var(--danger);
            color: white;
        }

        .close-btn:hover {
            background: #d32f2f;
        }

        .card-body {
            padding: 25px;
        }

        .stats-header {
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 1.1rem;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-box {
            background: #f9f9f9;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            border-left: 4px solid var(--primary);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 5px 0;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .progress-container {
            margin-top: 15px;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .progress-bar {
            height: 10px;
            background: var(--light-gray);
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 5px;
            width: 65%;
        }

        /* Donor Section */
        .donor-search {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 25px;
        }

        .search-header {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: var(--dark);
        }

        .search-filters {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-label {
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
            font-size: 0.9rem;
        }

        .filter-input {
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            font-family: 'Open Sans', sans-serif;
            font-size: 1rem;
        }

        .search-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .search-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-btn:hover {
            background: var(--primary-dark);
        }

        .reset-btn {
            background: var(--light-gray);
            color: var(--gray);
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .reset-btn:hover {
            background: #dcdcdc;
        }

        .donor-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }

        .donor-table th {
            background: var(--primary-light);
            padding: 15px 20px;
            text-align: left;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: var(--dark);
            border-bottom: 1px solid var(--light-gray);
        }

        .donor-table td {
            padding: 15px 20px;
            border-bottom: 1px solid var(--light-gray);
            color: var(--gray);
        }

        .donor-table tr:last-child td {
            border-bottom: none;
        }

        .donor-table tr:hover {
            background-color: #fff5f5;
        }

        .blood-group {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
            background: #ffebee;
            color: var(--primary);
        }

        /* Alert Section */
        .alert-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--box-shadow);
            margin-top: 30px;
        }

        .alert-header {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .alert-form {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .form-input, .form-select, .form-textarea {
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            font-family: 'Open Sans', sans-serif;
            font-size: 1rem;
            width: 100%;
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .send-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .send-btn:hover {
            background: #3d8b40;
        }

        /* Analytics Section */
        .analytics-container {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-top: 30px;
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .chart-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--light-gray);
        }

        .chart-header {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chart-container {
            height: 250px;
            position: relative;
        }

        /* Stats Summary */
        .stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            box-shadow: var(--box-shadow);
            border-top: 4px solid var(--primary);
        }

        .summary-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .summary-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
            margin: 5px 0;
        }

        .summary-label {
            font-size: 1rem;
            color: var(--gray);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal-body {
            padding: 25px;
        }

        .form-row {
            margin-bottom: 20px;
        }

        .form-row label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .form-row input, .form-row textarea, .form-row select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: 8px;
            font-family: 'Open Sans', sans-serif;
            font-size: 1rem;
        }

        .form-row textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 20px;
        }

        /* Responsive Design */
        @media (max-width: 1100px) {
            .events-grid {
                grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .tabs-nav {
                flex-direction: column;
            }

            .events-grid {
                grid-template-columns: 1fr;
            }

            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .card-actions {
                align-self: flex-end;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="dashboard-header">
            <div class="welcome-section">
                <h1>Welcome, NSS Organization!</h1>
                <p>Manage your blood donation drives and donor community</p>
            </div>
                          <button class="logout-btn" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>

                        <button class="logout-btn search-btn" onclick="goToSearch()">
                            <i class="fas fa-search"></i> Search
                        </button>
                        </div>

                        <script>
                        function logout() {
                            window.location.href = "/logout";
                        }
                        function goToSearch() {
                            window.location.href = "/search";
                        }
                        </script>
                                
           

                </script>

        </div>

        <!-- Tabs Navigation -->
        <div class="tabs-container">
            <div class="tabs-nav">
                <button class="tab-btn active" data-tab="drives">
                    <i class="fas fa-tint"></i> Active Drives
                </button>
                <button class="tab-btn" data-tab="donors">
                    <i class="fas fa-users"></i> Donor Management
                </button>
            </div>

            <!-- Active Drives Tab -->
            <div class="tab-content active" id="drives">
                <div class="section-header">
                    <h2>Active Blood Donation Drives</h2>
                    <button class="new-event-btn" id="createEvent">
                        <i class="fas fa-plus"></i> New Event
                    </button>
                    
                </div>

                <!-- Stats Summary -->
                <div class="stats-summary">
                    <div class="summary-card">
                        <i class="fas fa-heartbeat summary-icon"></i>
                        <div class="summary-value" id="totalDrives">3</div>
                        <div class="summary-label">Total Drives</div>
                    </div>
                    <div class="summary-card">
                        <i class="fas fa-user summary-icon"></i>
                        <div class="summary-value">1,248</div>
                        <div class="summary-label">Donors Reached</div>
                    </div>
                    <div class="summary-card">
                        <i class="fas fa-hand-holding-medical summary-icon"></i>
                        <div class="summary-value">2,865</div>
                        <div class="summary-label">Units Collected</div>
                    </div>
                    <div class="summary-card">
                        <i class="fas fa-map-marker-alt summary-icon"></i>
                        <div class="summary-value">12</div>
                        <div class="summary-label">Active Locations</div>
                    </div>
                </div>

                <!-- Events Grid -->
                <div class="events-grid" id="eventsContainer">
                    <!-- Events will be dynamically added here -->
                </div>

                <!-- Analytics Section -->
                <div class="analytics-container">
                    <div class="section-header">
                        <h2><i class="fas fa-chart-pie"></i> Drive Analytics</h2>
                    </div>
                    
                    <div class="analytics-grid">
                        <div class="chart-card">
                            <div class="chart-header">
                                <i class="fas fa-chart-bar"></i> Donations by Blood Type
                            </div>
                            <div class="chart-container">
                                <canvas id="bloodTypeChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <i class="fas fa-chart-line"></i> Monthly Donation Trend
                            </div>
                            <div class="chart-container">
                                <canvas id="monthlyTrendChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <div class="chart-header">
                                <i class="fas fa-map-marked-alt"></i> Donations by Location
                            </div>
                            <div class="chart-container">
                                <canvas id="locationChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Donor Management Tab -->
            <div class="tab-content" id="donors">
                <!-- Donor Search -->
                <div class="donor-search">
                    <div class="search-header">
                        <i class="fas fa-search"></i> Find Donors
                    </div>
                    
                    <div class="search-filters">
                        <div class="filter-group">
                            <label class="filter-label">Name</label>
                            <input type="text" id="donorName" class="filter-input" placeholder="Search by name">
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">Blood Group</label>
                            <select class="filter-input" id="bloodGroupFilter">
                                <option value="">All Blood Types</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">Location</label>
                            <input type="text" id="locationFilter" class="filter-input" placeholder="City or ZIP code">
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">Last Donation</label>
                            <select class="filter-input" id="lastDonationFilter">
                                <option value="">Any Time</option>
                                <option value="3">Within 3 months</option>
                                <option value="6">Within 6 months</option>
                                <option value="12">Within 12 months</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="search-actions">
                        <button class="reset-btn" id="resetDonorFilters">Reset Filters</button>
                        <button class="search-btn" id="searchDonors">Search Donors</button>
                    </div>
                </div>
                
                <!-- Donor Table -->
                <table class="donor-table" id="donorTable">
                    <thead>
                        <tr>
                            <th>Donor Name</th>
                            <th>Blood Group</th>
                            <th>Contact</th>
                            <th>Location</th>
                            <th>Last Donation</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Sarah Johnson</td>
                            <td><span class="blood-group">O+</span></td>
                            <td>sarah@email.com<br>(555) 123-4567</td>
                            <td>Downtown</td>
                            <td>15 May 2023</td>
                            <td><span style="color: var(--success);">Active</span></td>
                        </tr>
                        <tr>
                            <td>Michael Chen</td>
                            <td><span class="blood-group">AB-</span></td>
                            <td>michael@email.com<br>(555) 987-6543</td>
                            <td>West District</td>
                            <td>22 April 2023</td>
                            <td><span style="color: var(--success);">Active</span></td>
                        </tr>
                        <tr>
                            <td>Emma Rodriguez</td>
                            <td><span class="blood-group">B+</span></td>
                            <td>emma@email.com<br>(555) 456-7890</td>
                            <td>Northside</td>
                            <td>30 March 2023</td>
                            <td><span style="color: var(--warning);">Due Soon</span></td>
                        </tr>
                        <tr>
                            <td>James Wilson</td>
                            <td><span class="blood-group">A-</span></td>
                            <td>james@email.com<br>(555) 234-5678</td>
                            <td>East Borough</td>
                            <td>12 February 2023</td>
                            <td><span style="color: var(--danger);">Overdue</span></td>
                        </tr>
                        <tr>
                            <td>Lisa Thompson</td>
                            <td><span class="blood-group">O-</span></td>
                            <td>lisa@email.com<br>(555) 876-5432</td>
                            <td>South Quarter</td>
                            <td>5 June 2023</td>
                            <td><span style="color: var(--success);">Active</span></td>
                        </tr>
                    </tbody>
                </table>
                
                <!-- Alert Panel -->
                <div class="alert-container">
                    <div class="alert-header">
                        <i class="fas fa-bell"></i> Send Alert to Donors
                    </div>
                    
                    <div class="alert-form">
                        <div class="form-group">
                            <label class="form-label">Blood Group</label>
                            <select class="form-select" multiple id="alertBloodGroup">
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Location Radius</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="number" class="form-input" id="alertRadius" placeholder="Radius" value="10">
                                <select class="form-select" id="alertRadiusUnit">
                                    <option>Miles</option>
                                    <option>Kilometers</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">From Location</label>
                            <input type="text" class="form-input" id="alertLocation" placeholder="Enter ZIP or address">
                        </div>
                        
                        <div class="form-group" style="grid-column: span 2;">
                            <label class="form-label">Message</label>
                            <textarea class="form-textarea" id="alertMessage" placeholder="Type your message here...">Urgent need for blood donations! Our next drive is on June 30th at City Community Center. Your donation can save lives. Schedule your appointment now!</textarea>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button class="reset-btn" id="resetAlert">Reset</button>
                        <button class="send-btn" id="sendAlert">
                            <i class="fas fa-paper-plane"></i> Send Alert
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Modal -->
    <div class="modal" id="eventModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Create New Event</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="eventForm">
                    <div class="form-row">
                        <label for="eventTitle">Event Title</label>
                        <input type="text" id="eventTitle" required placeholder="Community Blood Drive">
                    </div>
                    
                    <div class="form-row">
                        <label for="eventDate">Date</label>
                        <input type="date" id="eventDate" required>
                    </div>
                    
                    <div class="form-row">
                        <label for="startTime">Start Time</label>
                        <input type="time" id="startTime" required>
                    </div>
                    
                    <div class="form-row">
                        <label for="endTime">End Time</label>
                        <input type="time" id="endTime" required>
                    </div>
                    
                    <div class="form-row">
                        <label for="eventLocation">Location</label>
                        <input type="text" id="eventLocation" required placeholder="City Community Center">
                    </div>
                    
                    <div class="form-row">
                        <label for="eventDescription">Description</label>
                        <textarea id="eventDescription" placeholder="Describe your event..."></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="reset-btn close-modal">Cancel</button>
                        <button type="submit" class="send-btn">Save Event</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Only the JavaScript section is modified; the rest of the HTML remains unchanged -->
<script>
    // ---------- Initialize the application ----------
    let events = []; // Global events array
    let currentEditId = null; // Track event being edited

    document.addEventListener('DOMContentLoaded', () => {
        // Initialize tabs
        document.querySelectorAll('.tab-btn').forEach(button => {
            button.addEventListener('click', () => {
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                button.classList.add('active');
                const tabId = button.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
            });
        });

        // Initialize charts
        initializeCharts();

        // Load events from localStorage
        loadEvents();

        // Initialize event handlers
        initializeEventHandlers();

        // Initialize donor management handlers
        initializeDonorHandlers();
    });

    // ---------- Event persistence functions ----------
    function saveEventsToStorage() {
        // Save events array to localStorage
        localStorage.setItem('bloodDriveEvents', JSON.stringify(events));
    }

    function loadEvents() {
        // Load events from localStorage or initialize if empty
        const storedEvents = localStorage.getItem('bloodDriveEvents');
        events = storedEvents ? JSON.parse(storedEvents) : [];
        renderEvents();
    }

    function renderEvents() {
        const eventsContainer = document.getElementById('eventsContainer');
        eventsContainer.innerHTML = '';

        if (events.length === 0) {
            eventsContainer.innerHTML = `
                <div class="no-events">
                    <i class="fas fa-tint"></i>
                    <p>No active blood drives found. Create your first event!</p>
                </div>
            `;
            updateSummaryCards();
            return;
        }

        // Render all events
        events.forEach(event => {
            eventsContainer.appendChild(createEventCard(event));
        });

        updateSummaryCards();
    }

    function updateSummaryCards() {
        // Calculate statistics from events data
        const totalDrives = events.length;
        const donorsReached = events.reduce((sum, event) => sum + event.registered, 0);
        const unitsCollected = events.reduce((sum, event) => sum + event.units, 0);
        const uniqueLocations = [...new Set(events.map(event => event.location))].length;

        // Update DOM elements
        document.getElementById('totalDrives').textContent = totalDrives;
        document.querySelectorAll('.summary-card .summary-value')[1].textContent = donorsReached.toLocaleString();
        document.querySelectorAll('.summary-card .summary-value')[2].textContent = unitsCollected.toLocaleString();
        document.querySelectorAll('.summary-card .summary-value')[3].textContent = uniqueLocations;
    }

    // ---------- Event management functions ----------
    function createEventCard(event) {
        const card = document.createElement('div');
        card.className = 'event-card';
        card.dataset.id = event.id;
        
        card.innerHTML = `
            <div class="card-header">
                <div class="event-info">
                    <div class="event-title">${event.title}</div>
                    <div class="event-date">
                        <i class="far fa-calendar-alt"></i> 
                        ${event.date}, ${event.time}
                    </div>
                    <div class="event-location">
                        <i class="fas fa-map-marker-alt"></i> 
                        ${event.location}
                    </div>
                </div>
                <div class="card-actions">
                    <button class="action-btn edit-btn" data-id="${event.id}">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="action-btn close-btn" data-id="${event.id}">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="card-body">
                <h3 class="stats-header">
                    <i class="fas fa-chart-line"></i> Drive Statistics
                </h3>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value">${event.registered}</div>
                        <div class="stat-label">Donors Registered</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">${event.donated}</div>
                        <div class="stat-label">Donated Today</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">${event.units}</div>
                        <div class="stat-label">Units Collected</div>
                    </div>
                </div>
                <div class="progress-container">
                    <div class="progress-header">
                        <span>Donation Progress</span>
                        <span>${event.progress}%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${event.progress}%"></div>
                    </div>
                </div>
            </div>
        `;
        
        return card;
    }

    function addNewEvent(eventData) {
        // Create a new event object
        const newEvent = {
            id: Date.now(), // Unique ID
            title: eventData.title,
            date: formatDate(eventData.date),
            time: formatTime(eventData.startTime, eventData.endTime),
            location: eventData.location,
            registered: Math.floor(Math.random() * 200) + 50,
            donated: Math.floor(Math.random() * 100) + 20,
            units: Math.floor(Math.random() * 150) + 30,
            progress: Math.floor(Math.random() * 40) + 50
        };
        
        // Add to events array
        events.unshift(newEvent);
        
        // Save to localStorage and update UI
        saveEventsToStorage();
        renderEvents();
    }

    function updateEvent(eventId, eventData) {
        // Find event by ID
        const eventIndex = events.findIndex(e => e.id == eventId);
        if (eventIndex === -1) return;
        
        // Update event properties
        events[eventIndex] = {
            ...events[eventIndex],
            title: eventData.title,
            date: formatDate(eventData.date),
            time: formatTime(eventData.startTime, eventData.endTime),
            location: eventData.location
        };
        
        // Save to localStorage and update UI
        saveEventsToStorage();
        renderEvents();
    }

    function closeEvent(eventId) {
        // Remove event from array
        events = events.filter(event => event.id != eventId);
        
        // Save to localStorage and update UI
        saveEventsToStorage();
        renderEvents();
    }

    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-US', { 
            month: 'long', 
            day: 'numeric', 
            year: 'numeric' 
        });
    }

    function formatTime(start, end) {
        const formatTime = (time) => {
            const [hours, minutes] = time.split(':');
            const hour = parseInt(hours);
            const suffix = hour >= 12 ? 'PM' : 'AM';
            const displayHour = hour % 12 || 12;
            return `${displayHour}:${minutes} ${suffix}`;
        };
        
        return `${formatTime(start)} - ${formatTime(end)}`;
    }

    // ---------- Modal functions ----------
    function openEventModal(eventId = null) {
        const modal = document.getElementById('eventModal');
        const modalTitle = document.getElementById('modalTitle');
        const form = document.getElementById('eventForm');
        
        if (eventId) {
            modalTitle.textContent = 'Edit Event';
            currentEditId = eventId;
            
            // Pre-fill form with event data
            const event = events.find(e => e.id == eventId);
            if (event) {
                // Note: We're using the formatted date/time for display only
                // In a real app, we would store/use raw date values
                document.getElementById('eventTitle').value = event.title;
                document.getElementById('eventLocation').value = event.location;
            }
        } else {
            modalTitle.textContent = 'Create New Event';
            currentEditId = null;
            form.reset();
        }
        
        modal.style.display = 'flex';
    }

    function closeEventModal() {
        document.getElementById('eventModal').style.display = 'none';
    }

    // ---------- Event handlers ----------
    function initializeEventHandlers() {
        // New event button
        document.getElementById('createEvent').addEventListener('click', () => {
            openEventModal();
        });
        
        // Close modal button
        document.querySelector('.close-modal').addEventListener('click', closeEventModal);
        
        // Modal form submission
        document.getElementById('eventForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const eventData = {
                title: document.getElementById('eventTitle').value,
                date: document.getElementById('eventDate').value,
                startTime: document.getElementById('startTime').value,
                endTime: document.getElementById('endTime').value,
                location: document.getElementById('eventLocation').value,
                description: document.getElementById('eventDescription').value
            };
            
            if (currentEditId) {
                updateEvent(currentEditId, eventData);
            } else {
                addNewEvent(eventData);
            }
            closeEventModal();
        });
        
        // Edit and close buttons (delegated)
        document.getElementById('eventsContainer').addEventListener('click', (e) => {
            const target = e.target.closest('.edit-btn');
            if (target) {
                const eventId = target.dataset.id;
                openEventModal(eventId);
            }
            
            const closeBtn = e.target.closest('.close-btn');
            if (closeBtn) {
                const eventId = closeBtn.dataset.id;
                if (confirm('Are you sure you want to close this event?')) {
                    closeEvent(eventId);
                }
            }
        });
    }

    // ---------- Donor management functions ----------
    function initializeDonorHandlers() {
        // Search donors button
        document.getElementById('searchDonors').addEventListener('click', () => {
            const name = document.getElementById('donorName').value.toLowerCase();
            const bloodGroup = document.getElementById('bloodGroupFilter').value;
            const location = document.getElementById('locationFilter').value.toLowerCase();
            const lastDonation = document.getElementById('lastDonationFilter').value;
            
            const rows = document.querySelectorAll('#donorTable tbody tr');
            
            rows.forEach(row => {
                const rowName = row.cells[0].textContent.toLowerCase();
                const rowBloodGroup = row.cells[1].textContent.trim();
                const rowLocation = row.cells[3].textContent.toLowerCase();
                
                const matchesName = name === '' || rowName.includes(name);
                const matchesBloodGroup = bloodGroup === '' || rowBloodGroup === bloodGroup;
                const matchesLocation = location === '' || rowLocation.includes(location);
                
                // Simplified filter for demo
                row.style.display = (matchesName && matchesBloodGroup && matchesLocation) ? '' : 'none';
            });
        });
        
        // Reset donor filters
        document.getElementById('resetDonorFilters').addEventListener('click', () => {
            document.getElementById('donorName').value = '';
            document.getElementById('bloodGroupFilter').value = '';
            document.getElementById('locationFilter').value = '';
            document.getElementById('lastDonationFilter').value = '';
            
            const rows = document.querySelectorAll('#donorTable tbody tr');
            rows.forEach(row => row.style.display = '');
        });
        
        // Reset alert form
        document.getElementById('resetAlert').addEventListener('click', () => {
            document.getElementById('alertBloodGroup').selectedIndex = -1;
            document.getElementById('alertRadius').value = '10';
            document.getElementById('alertRadiusUnit').selectedIndex = 0;
            document.getElementById('alertLocation').value = '';
            document.getElementById('alertMessage').value = 'Urgent need for blood donations! Our next drive is on June 30th at City Community Center. Your donation can save lives. Schedule your appointment now!';
        });
        
        // Send alert
        document.getElementById('sendAlert').addEventListener('click', () => {
            const bloodGroups = Array.from(document.getElementById('alertBloodGroup').selectedOptions)
                .map(option => option.value)
                .join(', ');
            
            const radius = document.getElementById('alertRadius').value;
            const unit = document.getElementById('alertRadiusUnit').value;
            const location = document.getElementById('alertLocation').value;
            const message = document.getElementById('alertMessage').value;
            
            alert(`Alert sent to donors with blood types: ${bloodGroups || 'All'}\nWithin ${radius} ${unit} of ${location || 'your location'}\n\nMessage: ${message}`);
        });
    }

    // ---------- Chart initialization ----------
    function initializeCharts() {
        // Blood Type Chart
        const bloodTypeCtx = document.getElementById('bloodTypeChart').getContext('2d');
        new Chart(bloodTypeCtx, {
            type: 'bar',
            data: {
                labels: ['O+', 'A+', 'B+', 'AB+', 'O-', 'A-', 'B-', 'AB-'],
                datasets: [{
                    label: 'Units Collected',
                    data: [620, 520, 380, 210, 180, 150, 120, 85],
                    backgroundColor: [
                        'rgba(211, 47, 47, 0.7)',
                        'rgba(244, 67, 54, 0.7)',
                        'rgba(229, 115, 115, 0.7)',
                        'rgba(239, 154, 154, 0.7)',
                        'rgba(229, 57, 53, 0.7)',
                        'rgba(244, 67, 54, 0.7)',
                        'rgba(229, 115, 115, 0.7)',
                        'rgba(239, 154, 154, 0.7)'
                    ],
                    borderColor: [
                        'rgb(183, 28, 28)',
                        'rgb(198, 40, 40)',
                        'rgb(229, 57, 53)',
                        'rgb(239, 83, 80)',
                        'rgb(183, 28, 28)',
                        'rgb(198, 40, 40)',
                        'rgb(229, 57, 53)',
                        'rgb(239, 83, 80)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            drawBorder: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // Monthly Trend Chart
        const trendCtx = document.getElementById('monthlyTrendChart').getContext('2d');
        new Chart(trendCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [{
                    label: 'Units Collected',
                    data: [185, 210, 198, 230, 245, 280, 220, 240, 260, 250, 270, 290],
                    fill: true,
                    backgroundColor: 'rgba(211, 47, 47, 0.1)',
                    borderColor: 'rgb(211, 47, 47)',
                    tension: 0.3,
                    pointBackgroundColor: 'white',
                    pointBorderColor: 'rgb(211, 47, 47)',
                    pointBorderWidth: 2,
                    pointRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: false,
                        min: 150,
                        grid: {
                            drawBorder: false
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });

        // Location Chart
        const locationCtx = document.getElementById('locationChart').getContext('2d');
        new Chart(locationCtx, {
            type: 'doughnut',
            data: {
                labels: ['Downtown', 'West District', 'Northside', 'East Borough', 'South Quarter'],
                datasets: [{
                    label: 'Donations by Location',
                    data: [420, 380, 350, 320, 310],
                    backgroundColor: [
                        'rgba(211, 47, 47, 0.7)',
                        'rgba(244, 67, 54, 0.7)',
                        'rgba(229, 115, 115, 0.7)',
                        'rgba(239, 154, 154, 0.7)',
                        'rgba(229, 57, 53, 0.7)'
                    ],
                    borderColor: [
                        'rgb(183, 28, 28)',
                        'rgb(198, 40, 40)',
                        'rgb(229, 57, 53)',
                        'rgb(239, 83, 80)',
                        'rgb(183, 28, 28)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });
    }
</script>
</body>
</html>